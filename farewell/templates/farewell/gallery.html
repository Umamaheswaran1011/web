{% extends 'farewell/base.html' %}
{% load static %}

{% block meta_description %}Memories Gallery - Our best moments captured forever{% endblock %}

{% block extra_css %}
<style>
    .event-card-actions {
        display: flex;
        gap: 0.5rem;
        margin-top: 0.8rem;
    }

    .event-card-actions .btn-icon {
        background: rgba(244, 228, 188, 0.7);
        border: 1px solid #d4a574;
        color: #2c1810;
        width: 34px;
        height: 34px;
        border-radius: 2px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.9rem;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
    }

    .btn-icon-edit:hover {
        background: #d4a574;
        box-shadow: 1px 2px 5px rgba(0, 0, 0, 0.1);
    }

    .btn-icon-delete:hover {
        background: #e8b4b8;
        border-color: #c0392b;
        box-shadow: 1px 2px 5px rgba(0, 0, 0, 0.1);
    }

    .event-card-footer {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-top: auto;
    }
</style>
{% endblock %}

{% block header_extra %}
<p class="gallery-subtitle">Every photo tells a story we never want to forget âœ¨</p>
<div class="nav-bar">
    <a href="{% url 'farewell:add_event' %}" class="btn-add" style="font-size: 1.2rem; padding: 0.7rem 1.5rem;">âœï¸ Add
        Event</a>
</div>
{% endblock %}

{% block content %}
<main class="gallery-grid">
    {% for event in events %}
    <div class="event-card animate-on-scroll slide-up">
        <div class="event-card-image">
            {% if event.cover_image %}
            <img src="{{ event.cover_image.url }}" alt="{{ event.title }}" loading="lazy">
            {% else %}
            <img src="https://via.placeholder.com/600x400" alt="{{ event.title }}" loading="lazy">
            {% endif %}
            <div class="event-card-overlay">
                <span class="photo-count">ğŸ“· {{ event.photo_count }} photos</span>
            </div>
        </div>
        <div class="event-card-content">
            <h3 class="event-card-title">{{ event.title }}</h3>
            <p class="event-card-date">ğŸ“… {{ event.date|date:"F j, Y" }}</p>
            {% if event.description %}
            <p class="event-card-desc">{{ event.description|truncatewords:20 }}</p>
            {% endif %}
            <div class="event-card-footer">
                <a href="{% url 'farewell:event_detail' event.pk %}" class="btn-view-album">View Album â†’</a>
                <div class="event-card-actions">
                    <a href="{% url 'farewell:edit_event' event.pk %}" class="btn-icon btn-icon-edit"
                        title="Edit Event">âœï¸</a>
                    <form action="{% url 'farewell:delete_event' event.pk %}" method="post"
                        onsubmit="return confirm('Delete this entire album and all its photos?');" style="margin:0;">
                        {% csrf_token %}
                        <button type="submit" class="btn-icon btn-icon-delete" title="Delete Event">ğŸ—‘ï¸</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    {% empty %}
    <div class="no-friends">
        <p>No events added yet. Click "Add Event" to create your first album! ğŸ“¸</p>
    </div>
    {% endfor %}
</main>
{% endblock %}